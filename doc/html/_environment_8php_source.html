<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Nina:  Fichier source de /home/damien/www/nina/lib/Twig/Environment.php</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nina
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Généré par Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="namespaces.html"><span>Espaces&#160;de&#160;nommage</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Variables&#160;globale</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_environment_8php.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/home/damien/www/nina/lib/Twig/Environment.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_environment_8php.html">Aller à la documentation de ce fichier.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">/*</span>
<a name="l00004"></a>00004 <span class="comment"> * This file is part of Twig.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * (c) 2009 Fabien Potencier</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * For the full copyright and license information, please view the LICENSE</span>
<a name="l00009"></a>00009 <span class="comment"> * file that was distributed with this source code.</span>
<a name="l00010"></a>00010 <span class="comment"> */</span>
<a name="l00011"></a>00011 
<a name="l00018"></a><a class="code" href="class_twig___environment.html">00018</a> <span class="keyword">class </span><a class="code" href="class_twig___environment.html">Twig_Environment</a>
<a name="l00019"></a>00019 {
<a name="l00020"></a><a class="code" href="class_twig___environment.html#af71005841ce53adac00581ab0ba24c1f">00020</a>     <span class="keyword">const</span> <a class="code" href="class_twig___environment.html#af71005841ce53adac00581ab0ba24c1f">VERSION</a> = <span class="stringliteral">&#39;1.8.0&#39;</span>;
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="class_twig___environment.html#af10158dd74b75f1d337e83102d6b82ce">00022</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#af10158dd74b75f1d337e83102d6b82ce">$charset</a>;
<a name="l00023"></a><a class="code" href="class_twig___environment.html#ab832f4c463ee1c9ba2e9464265f7ea3b">00023</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ab832f4c463ee1c9ba2e9464265f7ea3b">$loader</a>;
<a name="l00024"></a><a class="code" href="class_twig___environment.html#a85ae3e64cd40e9564adceb010085e9dd">00024</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a85ae3e64cd40e9564adceb010085e9dd">$debug</a>;
<a name="l00025"></a><a class="code" href="class_twig___environment.html#ae887a6f4d0cf24eed29e4202ed82f559">00025</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ae887a6f4d0cf24eed29e4202ed82f559">$autoReload</a>;
<a name="l00026"></a><a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">00026</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a>;
<a name="l00027"></a><a class="code" href="class_twig___environment.html#a63508a0b3a11f514f2b2124f99a05baf">00027</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a63508a0b3a11f514f2b2124f99a05baf">$lexer</a>;
<a name="l00028"></a><a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">00028</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>;
<a name="l00029"></a><a class="code" href="class_twig___environment.html#a8e5d240701ad41cd982ea35d9acd9ab7">00029</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a8e5d240701ad41cd982ea35d9acd9ab7">$compiler</a>;
<a name="l00030"></a><a class="code" href="class_twig___environment.html#a98b0e83a8f37e0143916958db3aa8283">00030</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a98b0e83a8f37e0143916958db3aa8283">$baseTemplateClass</a>;
<a name="l00031"></a><a class="code" href="class_twig___environment.html#a78dd0f5a8f983099dc6499a2d7cdf7aa">00031</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a78dd0f5a8f983099dc6499a2d7cdf7aa">$extensions</a>;
<a name="l00032"></a><a class="code" href="class_twig___environment.html#ae7df9b3add8c1b302615fc85fbd27de0">00032</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ae7df9b3add8c1b302615fc85fbd27de0">$parsers</a>;
<a name="l00033"></a><a class="code" href="class_twig___environment.html#a63a73490fa0428629a602fd9042a95aa">00033</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a63a73490fa0428629a602fd9042a95aa">$visitors</a>;
<a name="l00034"></a><a class="code" href="class_twig___environment.html#ae222f32233a38635bef58d24a13c9df5">00034</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ae222f32233a38635bef58d24a13c9df5">$filters</a>;
<a name="l00035"></a><a class="code" href="class_twig___environment.html#a6d7f4b753e7eb18b328a7eeba5e0094f">00035</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a6d7f4b753e7eb18b328a7eeba5e0094f">$tests</a>;
<a name="l00036"></a><a class="code" href="class_twig___environment.html#aa75daea491817f3b64daa2f51128bcdf">00036</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#aa75daea491817f3b64daa2f51128bcdf">$functions</a>;
<a name="l00037"></a><a class="code" href="class_twig___environment.html#aab94a86ac6c11a08ea99c0662106ec1e">00037</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#aab94a86ac6c11a08ea99c0662106ec1e">$globals</a>;
<a name="l00038"></a><a class="code" href="class_twig___environment.html#ab705dd9043d946e678f5dca0b6a129dd">00038</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ab705dd9043d946e678f5dca0b6a129dd">$runtimeInitialized</a>;
<a name="l00039"></a><a class="code" href="class_twig___environment.html#a499c81711b249d14b06f801914067e35">00039</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a499c81711b249d14b06f801914067e35">$loadedTemplates</a>;
<a name="l00040"></a><a class="code" href="class_twig___environment.html#a4468bee01e5114ad4844ffbcd6118bac">00040</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a4468bee01e5114ad4844ffbcd6118bac">$strictVariables</a>;
<a name="l00041"></a><a class="code" href="class_twig___environment.html#ae627d836785e9074fdd05ea18ed73415">00041</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ae627d836785e9074fdd05ea18ed73415">$unaryOperators</a>;
<a name="l00042"></a><a class="code" href="class_twig___environment.html#a0daebcbd551638ff610aee2905c70974">00042</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a0daebcbd551638ff610aee2905c70974">$binaryOperators</a>;
<a name="l00043"></a><a class="code" href="class_twig___environment.html#af10faffee6faa6f0321ea6642906308d">00043</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#af10faffee6faa6f0321ea6642906308d">$templateClassPrefix</a> = <span class="stringliteral">&#39;__TwigTemplate_&#39;</span>;
<a name="l00044"></a><a class="code" href="class_twig___environment.html#a3b3bccac51f11cd01d499a02b517366e">00044</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a3b3bccac51f11cd01d499a02b517366e">$functionCallbacks</a>;
<a name="l00045"></a><a class="code" href="class_twig___environment.html#ac5fa01924d75371c25209c49df63e4ce">00045</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#ac5fa01924d75371c25209c49df63e4ce">$filterCallbacks</a>;
<a name="l00046"></a><a class="code" href="class_twig___environment.html#a1063dfa8a1c0b5afe9b8359237f73042">00046</a>     <span class="keyword">protected</span> <a class="code" href="class_twig___environment.html#a1063dfa8a1c0b5afe9b8359237f73042">$staging</a>;
<a name="l00047"></a>00047 
<a name="l00085"></a><a class="code" href="class_twig___environment.html#aeb7b9fc79ec16f0d18b8685a9302873a">00085</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#aeb7b9fc79ec16f0d18b8685a9302873a">__construct</a>(<a class="code" href="interface_twig___loader_interface.html">Twig_LoaderInterface</a> <a class="code" href="class_twig___environment.html#ab832f4c463ee1c9ba2e9464265f7ea3b">$loader</a> = null, $options = array())
<a name="l00086"></a>00086     {
<a name="l00087"></a>00087         <span class="keywordflow">if</span> (null !== <a class="code" href="class_twig___environment.html#ab832f4c463ee1c9ba2e9464265f7ea3b">$loader</a>) {
<a name="l00088"></a>00088             $this-&gt;<a class="code" href="class_twig___environment.html#a7b2e6b9f72715d88eebb3ee0816057b4">setLoader</a>(<a class="code" href="class_twig___environment.html#ab832f4c463ee1c9ba2e9464265f7ea3b">$loader</a>);
<a name="l00089"></a>00089         }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091         $options = array_merge(array(
<a name="l00092"></a>00092             <span class="stringliteral">&#39;debug&#39;</span>               =&gt; <span class="keyword">false</span>,
<a name="l00093"></a>00093             <span class="stringliteral">&#39;charset&#39;</span>             =&gt; <span class="stringliteral">&#39;UTF-8&#39;</span>,
<a name="l00094"></a>00094             <span class="stringliteral">&#39;base_template_class&#39;</span> =&gt; <span class="stringliteral">&#39;Twig_Template&#39;</span>,
<a name="l00095"></a>00095             <span class="stringliteral">&#39;strict_variables&#39;</span>    =&gt; <span class="keyword">false</span>,
<a name="l00096"></a>00096             <span class="stringliteral">&#39;autoescape&#39;</span>          =&gt; <span class="stringliteral">&#39;html&#39;</span>,
<a name="l00097"></a>00097             <span class="stringliteral">&#39;cache&#39;</span>               =&gt; <span class="keyword">false</span>,
<a name="l00098"></a>00098             <span class="stringliteral">&#39;auto_reload&#39;</span>         =&gt; null,
<a name="l00099"></a>00099             <span class="stringliteral">&#39;optimizations&#39;</span>       =&gt; -1,
<a name="l00100"></a>00100         ), $options);
<a name="l00101"></a>00101 
<a name="l00102"></a>00102         $this-&gt;debug              = (bool) $options[<span class="stringliteral">&#39;debug&#39;</span>];
<a name="l00103"></a>00103         $this-&gt;charset            = $options[<span class="stringliteral">&#39;charset&#39;</span>];
<a name="l00104"></a>00104         $this-&gt;baseTemplateClass  = $options[<span class="stringliteral">&#39;base_template_class&#39;</span>];
<a name="l00105"></a>00105         $this-&gt;autoReload         = null === $options[<span class="stringliteral">&#39;auto_reload&#39;</span>] ? $this-&gt;debug : (bool) $options[<span class="stringliteral">&#39;auto_reload&#39;</span>];
<a name="l00106"></a>00106         $this-&gt;extensions         = array(
<a name="l00107"></a>00107             <span class="stringliteral">&#39;core&#39;</span>      =&gt; <span class="keyword">new</span> <a class="code" href="class_twig___extension___core.html">Twig_Extension_Core</a>(),
<a name="l00108"></a>00108             <span class="stringliteral">&#39;escaper&#39;</span>   =&gt; <span class="keyword">new</span> <a class="code" href="class_twig___extension___escaper.html">Twig_Extension_Escaper</a>($options[<span class="stringliteral">&#39;autoescape&#39;</span>]),
<a name="l00109"></a>00109             <span class="stringliteral">&#39;optimizer&#39;</span> =&gt; <span class="keyword">new</span> <a class="code" href="class_twig___extension___optimizer.html">Twig_Extension_Optimizer</a>($options[<span class="stringliteral">&#39;optimizations&#39;</span>]),
<a name="l00110"></a>00110         );
<a name="l00111"></a>00111         $this-&gt;strictVariables    = (bool) $options[<span class="stringliteral">&#39;strict_variables&#39;</span>];
<a name="l00112"></a>00112         $this-&gt;runtimeInitialized = <span class="keyword">false</span>;
<a name="l00113"></a>00113         $this-&gt;<a class="code" href="class_twig___environment.html#a1bfa0b30d50d9ccce38cd1bcf2375109">setCache</a>($options[<span class="stringliteral">&#39;cache&#39;</span>]);
<a name="l00114"></a>00114         $this-&gt;functionCallbacks = array();
<a name="l00115"></a>00115         $this-&gt;filterCallbacks = array();
<a name="l00116"></a>00116         $this-&gt;staging = array(
<a name="l00117"></a>00117             <span class="stringliteral">&#39;functions&#39;</span>     =&gt; array(),
<a name="l00118"></a>00118             <span class="stringliteral">&#39;filters&#39;</span>       =&gt; array(),
<a name="l00119"></a>00119             <span class="stringliteral">&#39;tests&#39;</span>         =&gt; array(),
<a name="l00120"></a>00120             <span class="stringliteral">&#39;token_parsers&#39;</span> =&gt; array(),
<a name="l00121"></a>00121             <span class="stringliteral">&#39;visitors&#39;</span>      =&gt; array(),
<a name="l00122"></a>00122             <span class="stringliteral">&#39;globals&#39;</span>       =&gt; array(),
<a name="l00123"></a>00123         );
<a name="l00124"></a>00124     }
<a name="l00125"></a>00125 
<a name="l00131"></a><a class="code" href="class_twig___environment.html#a9f3561c0378f53108aa9673bdd3c63a0">00131</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a9f3561c0378f53108aa9673bdd3c63a0">getBaseTemplateClass</a>()
<a name="l00132"></a>00132     {
<a name="l00133"></a>00133         <span class="keywordflow">return</span> $this-&gt;baseTemplateClass;
<a name="l00134"></a>00134     }
<a name="l00135"></a>00135 
<a name="l00141"></a><a class="code" href="class_twig___environment.html#a923e6b2ef89e647030c100214896548c">00141</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a923e6b2ef89e647030c100214896548c">setBaseTemplateClass</a>($class)
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143         $this-&gt;baseTemplateClass = $class;
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145 
<a name="l00149"></a><a class="code" href="class_twig___environment.html#a942b0cfbc1005c9bb0a5f2b0f7d25a25">00149</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a942b0cfbc1005c9bb0a5f2b0f7d25a25">enableDebug</a>()
<a name="l00150"></a>00150     {
<a name="l00151"></a>00151         $this-&gt;debug = <span class="keyword">true</span>;
<a name="l00152"></a>00152     }
<a name="l00153"></a>00153 
<a name="l00157"></a><a class="code" href="class_twig___environment.html#ad8fe55ee3d188c1b0d71585653debfef">00157</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ad8fe55ee3d188c1b0d71585653debfef">disableDebug</a>()
<a name="l00158"></a>00158     {
<a name="l00159"></a>00159         $this-&gt;debug = <span class="keyword">false</span>;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 
<a name="l00167"></a><a class="code" href="class_twig___environment.html#a017d21b4d0e1ee6f9cdd9d805793f076">00167</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a017d21b4d0e1ee6f9cdd9d805793f076">isDebug</a>()
<a name="l00168"></a>00168     {
<a name="l00169"></a>00169         <span class="keywordflow">return</span> $this-&gt;debug;
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171 
<a name="l00175"></a><a class="code" href="class_twig___environment.html#af27b2d02a1bd3d7dc0d2e72dff771cab">00175</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#af27b2d02a1bd3d7dc0d2e72dff771cab">enableAutoReload</a>()
<a name="l00176"></a>00176     {
<a name="l00177"></a>00177         $this-&gt;autoReload = <span class="keyword">true</span>;
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179 
<a name="l00183"></a><a class="code" href="class_twig___environment.html#a46062846c7f95b6b290e36d90c296491">00183</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a46062846c7f95b6b290e36d90c296491">disableAutoReload</a>()
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185         $this-&gt;autoReload = <span class="keyword">false</span>;
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00193"></a><a class="code" href="class_twig___environment.html#a7ba43ac4c9bdd0aefcd5140e4ea87a08">00193</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a7ba43ac4c9bdd0aefcd5140e4ea87a08">isAutoReload</a>()
<a name="l00194"></a>00194     {
<a name="l00195"></a>00195         <span class="keywordflow">return</span> $this-&gt;autoReload;
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197 
<a name="l00201"></a><a class="code" href="class_twig___environment.html#afe904f5f015cd40f965d5f524611c3fa">00201</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#afe904f5f015cd40f965d5f524611c3fa">enableStrictVariables</a>()
<a name="l00202"></a>00202     {
<a name="l00203"></a>00203         $this-&gt;strictVariables = <span class="keyword">true</span>;
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205 
<a name="l00209"></a><a class="code" href="class_twig___environment.html#a91b21a6aa5aed10b4f89888eaadefc80">00209</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a91b21a6aa5aed10b4f89888eaadefc80">disableStrictVariables</a>()
<a name="l00210"></a>00210     {
<a name="l00211"></a>00211         $this-&gt;strictVariables = <span class="keyword">false</span>;
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213 
<a name="l00219"></a><a class="code" href="class_twig___environment.html#ab39d5897ee5022ecc92032d769b9c60c">00219</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ab39d5897ee5022ecc92032d769b9c60c">isStrictVariables</a>()
<a name="l00220"></a>00220     {
<a name="l00221"></a>00221         <span class="keywordflow">return</span> $this-&gt;strictVariables;
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00229"></a><a class="code" href="class_twig___environment.html#ac4d56a528ec8b416428a2c3c86672dc8">00229</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ac4d56a528ec8b416428a2c3c86672dc8">getCache</a>()
<a name="l00230"></a>00230     {
<a name="l00231"></a>00231         <span class="keywordflow">return</span> $this-&gt;cache;
<a name="l00232"></a>00232     }
<a name="l00233"></a>00233 
<a name="l00240"></a><a class="code" href="class_twig___environment.html#a1bfa0b30d50d9ccce38cd1bcf2375109">00240</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a1bfa0b30d50d9ccce38cd1bcf2375109">setCache</a>(<a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a>)
<a name="l00241"></a>00241     {
<a name="l00242"></a>00242         $this-&gt;cache = <a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a> ? <a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a> : <span class="keyword">false</span>;
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244 
<a name="l00252"></a><a class="code" href="class_twig___environment.html#a453c3932d4a4b360c9c46216a0a762c4">00252</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a453c3932d4a4b360c9c46216a0a762c4">getCacheFilename</a>($name)
<a name="l00253"></a>00253     {
<a name="l00254"></a>00254         <span class="keywordflow">if</span> (<span class="keyword">false</span> === $this-&gt;cache) {
<a name="l00255"></a>00255             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258         $class = substr($this-&gt;<a class="code" href="class_twig___environment.html#a4949e6cb86c3444141918d26d1e6c741">getTemplateClass</a>($name), strlen($this-&gt;templateClassPrefix));
<a name="l00259"></a>00259 
<a name="l00260"></a>00260         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_twig___environment.html#ac4d56a528ec8b416428a2c3c86672dc8">getCache</a>().<span class="charliteral">&#39;/&#39;</span>.substr($class, 0, 2).<span class="charliteral">&#39;/&#39;</span>.substr($class, 2, 2).<span class="charliteral">&#39;/&#39;</span>.substr($class, 4).<span class="stringliteral">&#39;.php&#39;</span>;
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262 
<a name="l00271"></a><a class="code" href="class_twig___environment.html#a4949e6cb86c3444141918d26d1e6c741">00271</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a4949e6cb86c3444141918d26d1e6c741">getTemplateClass</a>($name, $index = null)
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273         <span class="keywordflow">return</span> $this-&gt;templateClassPrefix.md5($this-&gt;loader-&gt;getCacheKey($name)).(null === $index ? <span class="stringliteral">&#39;&#39;</span> : <span class="charliteral">&#39;_&#39;</span>.$index);
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 
<a name="l00281"></a><a class="code" href="class_twig___environment.html#a996a70040832913180f69561952d5be5">00281</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a996a70040832913180f69561952d5be5">getTemplateClassPrefix</a>()
<a name="l00282"></a>00282     {
<a name="l00283"></a>00283         <span class="keywordflow">return</span> $this-&gt;templateClassPrefix;
<a name="l00284"></a>00284     }
<a name="l00285"></a>00285 
<a name="l00294"></a><a class="code" href="class_twig___environment.html#a8f5169d8953835c0a313d3a62344ce58">00294</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a8f5169d8953835c0a313d3a62344ce58">render</a>($name, array $context = array())
<a name="l00295"></a>00295     {
<a name="l00296"></a>00296         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_twig___environment.html#a0641874ee64bc25d356b609b6cda9700">loadTemplate</a>($name)-&gt;render($context);
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298 
<a name="l00305"></a><a class="code" href="class_twig___environment.html#a09c36679881e4567dd156657559aa314">00305</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a09c36679881e4567dd156657559aa314">display</a>($name, array $context = array())
<a name="l00306"></a>00306     {
<a name="l00307"></a>00307         $this-&gt;<a class="code" href="class_twig___environment.html#a0641874ee64bc25d356b609b6cda9700">loadTemplate</a>($name)-&gt;display($context);
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 
<a name="l00318"></a><a class="code" href="class_twig___environment.html#a0641874ee64bc25d356b609b6cda9700">00318</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a0641874ee64bc25d356b609b6cda9700">loadTemplate</a>($name, $index = null)
<a name="l00319"></a>00319     {
<a name="l00320"></a>00320         $cls = $this-&gt;<a class="code" href="class_twig___environment.html#a4949e6cb86c3444141918d26d1e6c741">getTemplateClass</a>($name, $index);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322         <span class="keywordflow">if</span> (isset($this-&gt;loadedTemplates[$cls])) {
<a name="l00323"></a>00323             <span class="keywordflow">return</span> $this-&gt;loadedTemplates[$cls];
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326         <span class="keywordflow">if</span> (!class_exists($cls, <span class="keyword">false</span>)) {
<a name="l00327"></a>00327             <span class="keywordflow">if</span> (<span class="keyword">false</span> === <a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a> = $this-&gt;<a class="code" href="class_twig___environment.html#a453c3932d4a4b360c9c46216a0a762c4">getCacheFilename</a>($name)) {
<a name="l00328"></a>00328                 eval(<span class="stringliteral">&#39;?&gt;&#39;</span>.$this-&gt;<a class="code" href="class_twig___environment.html#a71d4b339e442b2024b9849b9bc802b7a">compileSource</a>($this-&gt;loader-&gt;getSource($name), $name));
<a name="l00329"></a>00329             } <span class="keywordflow">else</span> {
<a name="l00330"></a>00330                 <span class="keywordflow">if</span> (!is_file(<a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a>) || ($this-&gt;<a class="code" href="class_twig___environment.html#a7ba43ac4c9bdd0aefcd5140e4ea87a08">isAutoReload</a>() &amp;&amp; !$this-&gt;<a class="code" href="class_twig___environment.html#a550e54bc7b1aaab7001854bfeea98f72">isTemplateFresh</a>($name, filemtime(<a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a>)))) {
<a name="l00331"></a>00331                     $this-&gt;<a class="code" href="class_twig___environment.html#afef0e86e8f08fa1d0c4006ce65bede10">writeCacheFile</a>(<a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a>, $this-&gt;<a class="code" href="class_twig___environment.html#a71d4b339e442b2024b9849b9bc802b7a">compileSource</a>($this-&gt;loader-&gt;getSource($name), $name));
<a name="l00332"></a>00332                 }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334                 require_once <a class="code" href="class_twig___environment.html#ac2dc76d756ec398393d4b1d23659276c">$cache</a>;
<a name="l00335"></a>00335             }
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338         <span class="keywordflow">if</span> (!$this-&gt;runtimeInitialized) {
<a name="l00339"></a>00339             $this-&gt;<a class="code" href="class_twig___environment.html#a0dac3aaa30b0ac1d920ebdfe22eaae7f">initRuntime</a>();
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342         <span class="keywordflow">return</span> $this-&gt;loadedTemplates[$cls] = <span class="keyword">new</span> $cls($this);
<a name="l00343"></a>00343     }
<a name="l00344"></a>00344 
<a name="l00357"></a><a class="code" href="class_twig___environment.html#a550e54bc7b1aaab7001854bfeea98f72">00357</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a550e54bc7b1aaab7001854bfeea98f72">isTemplateFresh</a>($name, $time)
<a name="l00358"></a>00358     {
<a name="l00359"></a>00359         <span class="keywordflow">foreach</span> ($this-&gt;extensions as $extension) {
<a name="l00360"></a>00360             $r = <span class="keyword">new</span> ReflectionObject($extension);
<a name="l00361"></a>00361             <span class="keywordflow">if</span> (filemtime($r-&gt;getFileName()) &gt; $time) {
<a name="l00362"></a>00362                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00363"></a>00363             }
<a name="l00364"></a>00364         }
<a name="l00365"></a>00365 
<a name="l00366"></a>00366         <span class="keywordflow">return</span> $this-&gt;loader-&gt;isFresh($name, $time);
<a name="l00367"></a>00367     }
<a name="l00368"></a>00368 
<a name="l00369"></a><a class="code" href="class_twig___environment.html#af1cc34fcbd8561be8a6075517d107630">00369</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#af1cc34fcbd8561be8a6075517d107630">resolveTemplate</a>($names)
<a name="l00370"></a>00370     {
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (!is_array($names)) {
<a name="l00372"></a>00372             $names = array($names);
<a name="l00373"></a>00373         }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375         <span class="keywordflow">foreach</span> ($names as $name) {
<a name="l00376"></a>00376             <span class="keywordflow">if</span> ($name instanceof <a class="code" href="class_twig___template.html">Twig_Template</a>) {
<a name="l00377"></a>00377                 <span class="keywordflow">return</span> $name;
<a name="l00378"></a>00378             }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380             <span class="keywordflow">try</span> {
<a name="l00381"></a>00381                 <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_twig___environment.html#a0641874ee64bc25d356b609b6cda9700">loadTemplate</a>($name);
<a name="l00382"></a>00382             } <span class="keywordflow">catch</span> (<a class="code" href="class_twig___error___loader.html">Twig_Error_Loader</a> $e) {
<a name="l00383"></a>00383             }
<a name="l00384"></a>00384         }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386         <span class="keywordflow">if</span> (1 === count($names)) {
<a name="l00387"></a>00387             <span class="keywordflow">throw</span> $e;
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_twig___error___loader.html">Twig_Error_Loader</a>(sprintf(<span class="stringliteral">&#39;Unable to find one of the following templates: &quot;%s&quot;.&#39;</span>, implode(<span class="stringliteral">&#39;&quot;, &quot;&#39;</span>, $names)));
<a name="l00391"></a>00391     }
<a name="l00392"></a>00392 
<a name="l00396"></a><a class="code" href="class_twig___environment.html#a9b6e645c229f4cef3f7bf6e3eca5ae2d">00396</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a9b6e645c229f4cef3f7bf6e3eca5ae2d">clearTemplateCache</a>()
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398         $this-&gt;loadedTemplates = array();
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400 
<a name="l00404"></a><a class="code" href="class_twig___environment.html#a1b98cd192f56b7d2234816b62203edff">00404</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a1b98cd192f56b7d2234816b62203edff">clearCacheFiles</a>()
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406         <span class="keywordflow">if</span> (<span class="keyword">false</span> === $this-&gt;cache) {
<a name="l00407"></a>00407             <span class="keywordflow">return</span>;
<a name="l00408"></a>00408         }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410         <span class="keywordflow">foreach</span> (<span class="keyword">new</span> RecursiveIteratorIterator(<span class="keyword">new</span> RecursiveDirectoryIterator($this-&gt;cache), RecursiveIteratorIterator::LEAVES_ONLY) as $file) {
<a name="l00411"></a>00411             <span class="keywordflow">if</span> ($file-&gt;isFile()) {
<a name="l00412"></a>00412                 @unlink($file-&gt;getPathname());
<a name="l00413"></a>00413             }
<a name="l00414"></a>00414         }
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416 
<a name="l00422"></a><a class="code" href="class_twig___environment.html#a41904927ec501424d235015965e8cdee">00422</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a41904927ec501424d235015965e8cdee">getLexer</a>()
<a name="l00423"></a>00423     {
<a name="l00424"></a>00424         <span class="keywordflow">if</span> (null === $this-&gt;lexer) {
<a name="l00425"></a>00425             $this-&gt;lexer = <span class="keyword">new</span> <a class="code" href="class_twig___lexer.html">Twig_Lexer</a>($this);
<a name="l00426"></a>00426         }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428         <span class="keywordflow">return</span> $this-&gt;lexer;
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430 
<a name="l00436"></a><a class="code" href="class_twig___environment.html#aee05c0d74c1194a030f13d7d2e3c1b6f">00436</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#aee05c0d74c1194a030f13d7d2e3c1b6f">setLexer</a>(<a class="code" href="interface_twig___lexer_interface.html">Twig_LexerInterface</a> <a class="code" href="class_twig___environment.html#a63508a0b3a11f514f2b2124f99a05baf">$lexer</a>)
<a name="l00437"></a>00437     {
<a name="l00438"></a>00438         $this-&gt;lexer = <a class="code" href="class_twig___environment.html#a63508a0b3a11f514f2b2124f99a05baf">$lexer</a>;
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440 
<a name="l00449"></a><a class="code" href="class_twig___environment.html#a69b81a225a371337d9854e72ec3f676d">00449</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a69b81a225a371337d9854e72ec3f676d">tokenize</a>($source, $name = null)
<a name="l00450"></a>00450     {
<a name="l00451"></a>00451         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_twig___environment.html#a41904927ec501424d235015965e8cdee">getLexer</a>()-&gt;tokenize($source, $name);
<a name="l00452"></a>00452     }
<a name="l00453"></a>00453 
<a name="l00459"></a><a class="code" href="class_twig___environment.html#a4b6907ea868dc9053e1f7d6260fa4b4f">00459</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a4b6907ea868dc9053e1f7d6260fa4b4f">getParser</a>()
<a name="l00460"></a>00460     {
<a name="l00461"></a>00461         <span class="keywordflow">if</span> (null === $this-&gt;parser) {
<a name="l00462"></a>00462             $this-&gt;parser = <span class="keyword">new</span> <a class="code" href="class_twig___parser.html">Twig_Parser</a>($this);
<a name="l00463"></a>00463         }
<a name="l00464"></a>00464 
<a name="l00465"></a>00465         <span class="keywordflow">return</span> $this-&gt;parser;
<a name="l00466"></a>00466     }
<a name="l00467"></a>00467 
<a name="l00473"></a><a class="code" href="class_twig___environment.html#ac16cd9a5f9db326226c01aa3ee943857">00473</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ac16cd9a5f9db326226c01aa3ee943857">setParser</a>(<a class="code" href="interface_twig___parser_interface.html">Twig_ParserInterface</a> <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>)
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475         $this-&gt;parser = <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>;
<a name="l00476"></a>00476     }
<a name="l00477"></a>00477 
<a name="l00485"></a><a class="code" href="class_twig___environment.html#abc2e2ca310c29a43f899961ef076c61e">00485</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#abc2e2ca310c29a43f899961ef076c61e">parse</a>(<a class="code" href="class_twig___token_stream.html">Twig_TokenStream</a> $tokens)
<a name="l00486"></a>00486     {
<a name="l00487"></a>00487         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_twig___environment.html#a4b6907ea868dc9053e1f7d6260fa4b4f">getParser</a>()-&gt;parse($tokens);
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489 
<a name="l00495"></a><a class="code" href="class_twig___environment.html#ac37cd6bf8b37e0cde150727f16a535f8">00495</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ac37cd6bf8b37e0cde150727f16a535f8">getCompiler</a>()
<a name="l00496"></a>00496     {
<a name="l00497"></a>00497         <span class="keywordflow">if</span> (null === $this-&gt;compiler) {
<a name="l00498"></a>00498             $this-&gt;compiler = <span class="keyword">new</span> <a class="code" href="class_twig___compiler.html">Twig_Compiler</a>($this);
<a name="l00499"></a>00499         }
<a name="l00500"></a>00500 
<a name="l00501"></a>00501         <span class="keywordflow">return</span> $this-&gt;compiler;
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503 
<a name="l00509"></a><a class="code" href="class_twig___environment.html#a1dcd474337e99babac147ee2384353de">00509</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a1dcd474337e99babac147ee2384353de">setCompiler</a>(<a class="code" href="interface_twig___compiler_interface.html">Twig_CompilerInterface</a> <a class="code" href="class_twig___environment.html#a8e5d240701ad41cd982ea35d9acd9ab7">$compiler</a>)
<a name="l00510"></a>00510     {
<a name="l00511"></a>00511         $this-&gt;compiler = <a class="code" href="class_twig___environment.html#a8e5d240701ad41cd982ea35d9acd9ab7">$compiler</a>;
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513 
<a name="l00521"></a><a class="code" href="class_twig___environment.html#a3f2ebfe4306bcd152c544085112319b5">00521</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a3f2ebfe4306bcd152c544085112319b5">compile</a>(<a class="code" href="interface_twig___node_interface.html">Twig_NodeInterface</a> $node)
<a name="l00522"></a>00522     {
<a name="l00523"></a>00523         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_twig___environment.html#ac37cd6bf8b37e0cde150727f16a535f8">getCompiler</a>()-&gt;compile($node)-&gt;getSource();
<a name="l00524"></a>00524     }
<a name="l00525"></a>00525 
<a name="l00534"></a><a class="code" href="class_twig___environment.html#a71d4b339e442b2024b9849b9bc802b7a">00534</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a71d4b339e442b2024b9849b9bc802b7a">compileSource</a>($source, $name = null)
<a name="l00535"></a>00535     {
<a name="l00536"></a>00536         <span class="keywordflow">try</span> {
<a name="l00537"></a>00537             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_twig___environment.html#a3f2ebfe4306bcd152c544085112319b5">compile</a>($this-&gt;<a class="code" href="class_twig___environment.html#abc2e2ca310c29a43f899961ef076c61e">parse</a>($this-&gt;<a class="code" href="class_twig___environment.html#a69b81a225a371337d9854e72ec3f676d">tokenize</a>($source, $name)));
<a name="l00538"></a>00538         } <span class="keywordflow">catch</span> (<a class="code" href="class_twig___error.html">Twig_Error</a> $e) {
<a name="l00539"></a>00539             $e-&gt;<a class="code" href="class_twig___error.html#aecc0e5e79dece93715f37d05a9bec2ae">setTemplateFile</a>($name);
<a name="l00540"></a>00540             <span class="keywordflow">throw</span> $e;
<a name="l00541"></a>00541         } <span class="keywordflow">catch</span> (Exception $e) {
<a name="l00542"></a>00542             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_twig___error___runtime.html">Twig_Error_Runtime</a>(sprintf(<span class="stringliteral">&#39;An exception has been thrown during the compilation of a template (&quot;%s&quot;).&#39;</span>, $e-&gt;getMessage()), -1, $name, $e);
<a name="l00543"></a>00543         }
<a name="l00544"></a>00544     }
<a name="l00545"></a>00545 
<a name="l00551"></a><a class="code" href="class_twig___environment.html#a7b2e6b9f72715d88eebb3ee0816057b4">00551</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a7b2e6b9f72715d88eebb3ee0816057b4">setLoader</a>(<a class="code" href="interface_twig___loader_interface.html">Twig_LoaderInterface</a> <a class="code" href="class_twig___environment.html#ab832f4c463ee1c9ba2e9464265f7ea3b">$loader</a>)
<a name="l00552"></a>00552     {
<a name="l00553"></a>00553         $this-&gt;loader = <a class="code" href="class_twig___environment.html#ab832f4c463ee1c9ba2e9464265f7ea3b">$loader</a>;
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555 
<a name="l00561"></a><a class="code" href="class_twig___environment.html#a461527c1de39a5520c52951b8f03d99f">00561</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a461527c1de39a5520c52951b8f03d99f">getLoader</a>()
<a name="l00562"></a>00562     {
<a name="l00563"></a>00563         <span class="keywordflow">return</span> $this-&gt;loader;
<a name="l00564"></a>00564     }
<a name="l00565"></a>00565 
<a name="l00571"></a><a class="code" href="class_twig___environment.html#a81ee11b0f5fadecaece55170fea54b29">00571</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a81ee11b0f5fadecaece55170fea54b29">setCharset</a>(<a class="code" href="class_twig___environment.html#af10158dd74b75f1d337e83102d6b82ce">$charset</a>)
<a name="l00572"></a>00572     {
<a name="l00573"></a>00573         $this-&gt;charset = <a class="code" href="class_twig___environment.html#af10158dd74b75f1d337e83102d6b82ce">$charset</a>;
<a name="l00574"></a>00574     }
<a name="l00575"></a>00575 
<a name="l00581"></a><a class="code" href="class_twig___environment.html#abca2d528da8311b6fcfe040768cbaa24">00581</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#abca2d528da8311b6fcfe040768cbaa24">getCharset</a>()
<a name="l00582"></a>00582     {
<a name="l00583"></a>00583         <span class="keywordflow">return</span> $this-&gt;charset;
<a name="l00584"></a>00584     }
<a name="l00585"></a>00585 
<a name="l00589"></a><a class="code" href="class_twig___environment.html#a0dac3aaa30b0ac1d920ebdfe22eaae7f">00589</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a0dac3aaa30b0ac1d920ebdfe22eaae7f">initRuntime</a>()
<a name="l00590"></a>00590     {
<a name="l00591"></a>00591         $this-&gt;runtimeInitialized = <span class="keyword">true</span>;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l00594"></a>00594             $extension-&gt;initRuntime($this);
<a name="l00595"></a>00595         }
<a name="l00596"></a>00596     }
<a name="l00597"></a>00597 
<a name="l00605"></a><a class="code" href="class_twig___environment.html#a5ca11be64dd4ff9f21e31e3ebc2619b1">00605</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a5ca11be64dd4ff9f21e31e3ebc2619b1">hasExtension</a>($name)
<a name="l00606"></a>00606     {
<a name="l00607"></a>00607         <span class="keywordflow">return</span> isset($this-&gt;extensions[$name]);
<a name="l00608"></a>00608     }
<a name="l00609"></a>00609 
<a name="l00617"></a><a class="code" href="class_twig___environment.html#af2f1572d80cede386cbf11bd7e213c31">00617</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#af2f1572d80cede386cbf11bd7e213c31">getExtension</a>($name)
<a name="l00618"></a>00618     {
<a name="l00619"></a>00619         <span class="keywordflow">if</span> (!isset($this-&gt;extensions[$name])) {
<a name="l00620"></a>00620             <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_twig___error___runtime.html">Twig_Error_Runtime</a>(sprintf(<span class="stringliteral">&#39;The &quot;%s&quot; extension is not enabled.&#39;</span>, $name));
<a name="l00621"></a>00621         }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623         <span class="keywordflow">return</span> $this-&gt;extensions[$name];
<a name="l00624"></a>00624     }
<a name="l00625"></a>00625 
<a name="l00631"></a><a class="code" href="class_twig___environment.html#a370f3b63254ddd9a5c5b0a7d22013a95">00631</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a370f3b63254ddd9a5c5b0a7d22013a95">addExtension</a>(<a class="code" href="interface_twig___extension_interface.html">Twig_ExtensionInterface</a> $extension)
<a name="l00632"></a>00632     {
<a name="l00633"></a>00633         $this-&gt;extensions[$extension-&gt;<a class="code" href="interface_twig___extension_interface.html#a3d0963e68bb313b163a73f2803c64600">getName</a>()] = $extension;
<a name="l00634"></a>00634         $this-&gt;parsers = null;
<a name="l00635"></a>00635         $this-&gt;visitors = null;
<a name="l00636"></a>00636         $this-&gt;filters = null;
<a name="l00637"></a>00637         $this-&gt;tests = null;
<a name="l00638"></a>00638         $this-&gt;functions = null;
<a name="l00639"></a>00639         $this-&gt;globals = null;
<a name="l00640"></a>00640     }
<a name="l00641"></a>00641 
<a name="l00647"></a><a class="code" href="class_twig___environment.html#a231cd85fca6feec29726a7b351baa112">00647</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a231cd85fca6feec29726a7b351baa112">removeExtension</a>($name)
<a name="l00648"></a>00648     {
<a name="l00649"></a>00649         unset($this-&gt;extensions[$name]);
<a name="l00650"></a>00650         $this-&gt;parsers = null;
<a name="l00651"></a>00651         $this-&gt;visitors = null;
<a name="l00652"></a>00652         $this-&gt;filters = null;
<a name="l00653"></a>00653         $this-&gt;tests = null;
<a name="l00654"></a>00654         $this-&gt;functions = null;
<a name="l00655"></a>00655         $this-&gt;globals = null;
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657 
<a name="l00663"></a><a class="code" href="class_twig___environment.html#ad226f4ce37612efcc6717bd592ca7b7d">00663</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ad226f4ce37612efcc6717bd592ca7b7d">setExtensions</a>(array <a class="code" href="class_twig___environment.html#a78dd0f5a8f983099dc6499a2d7cdf7aa">$extensions</a>)
<a name="l00664"></a>00664     {
<a name="l00665"></a>00665         <span class="keywordflow">foreach</span> ($extensions as $extension) {
<a name="l00666"></a>00666             $this-&gt;<a class="code" href="class_twig___environment.html#a370f3b63254ddd9a5c5b0a7d22013a95">addExtension</a>($extension);
<a name="l00667"></a>00667         }
<a name="l00668"></a>00668     }
<a name="l00669"></a>00669 
<a name="l00675"></a><a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">00675</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>()
<a name="l00676"></a>00676     {
<a name="l00677"></a>00677         <span class="keywordflow">return</span> $this-&gt;extensions;
<a name="l00678"></a>00678     }
<a name="l00679"></a>00679 
<a name="l00685"></a><a class="code" href="class_twig___environment.html#a8f805d29eac2b8ce1da513e9390952f3">00685</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a8f805d29eac2b8ce1da513e9390952f3">addTokenParser</a>(<a class="code" href="interface_twig___token_parser_interface.html">Twig_TokenParserInterface</a> <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>)
<a name="l00686"></a>00686     {
<a name="l00687"></a>00687         $this-&gt;staging[<span class="stringliteral">&#39;token_parsers&#39;</span>][] = <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>;
<a name="l00688"></a>00688         $this-&gt;parsers = null;
<a name="l00689"></a>00689     }
<a name="l00690"></a>00690 
<a name="l00696"></a><a class="code" href="class_twig___environment.html#a8fd35903c3d01c0f0078f59d142eb063">00696</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a8fd35903c3d01c0f0078f59d142eb063">getTokenParsers</a>()
<a name="l00697"></a>00697     {
<a name="l00698"></a>00698         <span class="keywordflow">if</span> (null === $this-&gt;parsers) {
<a name="l00699"></a>00699             $this-&gt;parsers = <span class="keyword">new</span> <a class="code" href="class_twig___token_parser_broker.html">Twig_TokenParserBroker</a>();
<a name="l00700"></a>00700 
<a name="l00701"></a>00701             <span class="keywordflow">if</span> (isset($this-&gt;staging[<span class="stringliteral">&#39;token_parsers&#39;</span>])) {
<a name="l00702"></a>00702                 <span class="keywordflow">foreach</span> ($this-&gt;staging[<span class="stringliteral">&#39;token_parsers&#39;</span>] as <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>) {
<a name="l00703"></a>00703                     $this-&gt;parsers-&gt;addTokenParser($parser);
<a name="l00704"></a>00704                 }
<a name="l00705"></a>00705             }
<a name="l00706"></a>00706 
<a name="l00707"></a>00707             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l00708"></a>00708                 <a class="code" href="class_twig___environment.html#ae7df9b3add8c1b302615fc85fbd27de0">$parsers</a> = $extension-&gt;getTokenParsers();
<a name="l00709"></a>00709                 <span class="keywordflow">foreach</span>(<a class="code" href="class_twig___environment.html#ae7df9b3add8c1b302615fc85fbd27de0">$parsers</a> as <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>) {
<a name="l00710"></a>00710                     <span class="keywordflow">if</span> ($parser instanceof <a class="code" href="interface_twig___token_parser_interface.html">Twig_TokenParserInterface</a>) {
<a name="l00711"></a>00711                         $this-&gt;parsers-&gt;addTokenParser($parser);
<a name="l00712"></a>00712                     } elseif ($parser instanceof <a class="code" href="interface_twig___token_parser_broker_interface.html">Twig_TokenParserBrokerInterface</a>) {
<a name="l00713"></a>00713                         $this-&gt;parsers-&gt;addTokenParserBroker($parser);
<a name="l00714"></a>00714                     } <span class="keywordflow">else</span> {
<a name="l00715"></a>00715                         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_twig___error___runtime.html">Twig_Error_Runtime</a>(<span class="stringliteral">&#39;getTokenParsers() must return an array of Twig_TokenParserInterface or Twig_TokenParserBrokerInterface instances&#39;</span>);
<a name="l00716"></a>00716                     }
<a name="l00717"></a>00717                 }
<a name="l00718"></a>00718             }
<a name="l00719"></a>00719         }
<a name="l00720"></a>00720 
<a name="l00721"></a>00721         <span class="keywordflow">return</span> $this-&gt;parsers;
<a name="l00722"></a>00722     }
<a name="l00723"></a>00723 
<a name="l00731"></a><a class="code" href="class_twig___environment.html#ae07173ab06a20e2f5bd928cc0518e01f">00731</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ae07173ab06a20e2f5bd928cc0518e01f">getTags</a>()
<a name="l00732"></a>00732     {
<a name="l00733"></a>00733         $tags = array();
<a name="l00734"></a>00734         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a8fd35903c3d01c0f0078f59d142eb063">getTokenParsers</a>()-&gt;getParsers() as <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>) {
<a name="l00735"></a>00735             <span class="keywordflow">if</span> ($parser instanceof <a class="code" href="interface_twig___token_parser_interface.html">Twig_TokenParserInterface</a>) {
<a name="l00736"></a>00736                 $tags[$parser-&gt;getTag()] = <a class="code" href="class_twig___environment.html#a147a766daa03d52576c7345fea31c945">$parser</a>;
<a name="l00737"></a>00737             }
<a name="l00738"></a>00738         }
<a name="l00739"></a>00739 
<a name="l00740"></a>00740         <span class="keywordflow">return</span> $tags;
<a name="l00741"></a>00741     }
<a name="l00742"></a>00742 
<a name="l00748"></a><a class="code" href="class_twig___environment.html#adc294d7c409f47d2c26847601897c6db">00748</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#adc294d7c409f47d2c26847601897c6db">addNodeVisitor</a>(<a class="code" href="interface_twig___node_visitor_interface.html">Twig_NodeVisitorInterface</a> $visitor)
<a name="l00749"></a>00749     {
<a name="l00750"></a>00750         $this-&gt;staging[<span class="stringliteral">&#39;visitors&#39;</span>][] = $visitor;
<a name="l00751"></a>00751         $this-&gt;visitors = null;
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753 
<a name="l00759"></a><a class="code" href="class_twig___environment.html#aec02093179d390d22ae4083f23a1d74a">00759</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#aec02093179d390d22ae4083f23a1d74a">getNodeVisitors</a>()
<a name="l00760"></a>00760     {
<a name="l00761"></a>00761         <span class="keywordflow">if</span> (null === $this-&gt;visitors) {
<a name="l00762"></a>00762             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l00763"></a>00763                 <span class="keywordflow">foreach</span> ($extension-&gt;getNodeVisitors() as $visitor) {
<a name="l00764"></a>00764                     $this-&gt;<a class="code" href="class_twig___environment.html#adc294d7c409f47d2c26847601897c6db">addNodeVisitor</a>($visitor);
<a name="l00765"></a>00765                 }
<a name="l00766"></a>00766             }
<a name="l00767"></a>00767 
<a name="l00768"></a>00768             $this-&gt;visitors = $this-&gt;staging[<span class="stringliteral">&#39;visitors&#39;</span>];
<a name="l00769"></a>00769         }
<a name="l00770"></a>00770 
<a name="l00771"></a>00771         <span class="keywordflow">return</span> $this-&gt;visitors;
<a name="l00772"></a>00772     }
<a name="l00773"></a>00773 
<a name="l00780"></a><a class="code" href="class_twig___environment.html#a2b1ca0849f059aaa366ba9ba049dcdd7">00780</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a2b1ca0849f059aaa366ba9ba049dcdd7">addFilter</a>($name, <a class="code" href="interface_twig___filter_interface.html">Twig_FilterInterface</a> $filter)
<a name="l00781"></a>00781     {
<a name="l00782"></a>00782         $this-&gt;staging[<span class="stringliteral">&#39;filters&#39;</span>][$name] = $filter;
<a name="l00783"></a>00783         $this-&gt;filters = null;
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 
<a name="l00796"></a><a class="code" href="class_twig___environment.html#a4a7bab9eccf45585b757bc4637d49c51">00796</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a4a7bab9eccf45585b757bc4637d49c51">getFilter</a>($name)
<a name="l00797"></a>00797     {
<a name="l00798"></a>00798         <span class="keywordflow">if</span> (null === $this-&gt;filters) {
<a name="l00799"></a>00799             $this-&gt;<a class="code" href="class_twig___environment.html#a428d91319fc73d3038784cf5436936b6">getFilters</a>();
<a name="l00800"></a>00800         }
<a name="l00801"></a>00801 
<a name="l00802"></a>00802         <span class="keywordflow">if</span> (isset($this-&gt;filters[$name])) {
<a name="l00803"></a>00803             <span class="keywordflow">return</span> $this-&gt;filters[$name];
<a name="l00804"></a>00804         }
<a name="l00805"></a>00805 
<a name="l00806"></a>00806         <span class="keywordflow">foreach</span> ($this-&gt;filters as $pattern =&gt; $filter) {
<a name="l00807"></a>00807             $pattern = str_replace(<span class="stringliteral">&#39;\\*&#39;</span>, <span class="stringliteral">&#39;(.*?)&#39;</span>, preg_quote($pattern, <span class="charliteral">&#39;#&#39;</span>), $count);
<a name="l00808"></a>00808 
<a name="l00809"></a>00809             <span class="keywordflow">if</span> ($count) {
<a name="l00810"></a>00810                 <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;#^&#39;</span>.$pattern.<span class="stringliteral">&#39;$#&#39;</span>, $name, $matches)) {
<a name="l00811"></a>00811                     array_shift($matches);
<a name="l00812"></a>00812                     $filter-&gt;setArguments($matches);
<a name="l00813"></a>00813 
<a name="l00814"></a>00814                     <span class="keywordflow">return</span> $filter;
<a name="l00815"></a>00815                 }
<a name="l00816"></a>00816             }
<a name="l00817"></a>00817         }
<a name="l00818"></a>00818 
<a name="l00819"></a>00819         <span class="keywordflow">foreach</span> ($this-&gt;filterCallbacks as $callback) {
<a name="l00820"></a>00820             <span class="keywordflow">if</span> (<span class="keyword">false</span> !== $filter = call_user_func($callback, $name)) {
<a name="l00821"></a>00821                 <span class="keywordflow">return</span> $filter;
<a name="l00822"></a>00822             }
<a name="l00823"></a>00823         }
<a name="l00824"></a>00824 
<a name="l00825"></a>00825         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00826"></a>00826     }
<a name="l00827"></a>00827 
<a name="l00828"></a><a class="code" href="class_twig___environment.html#a34e0732405a6c7994b333ce2f8a1deb0">00828</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a34e0732405a6c7994b333ce2f8a1deb0">registerUndefinedFilterCallback</a>($callable)
<a name="l00829"></a>00829     {
<a name="l00830"></a>00830         $this-&gt;filterCallbacks[] = $callable;
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832 
<a name="l00842"></a><a class="code" href="class_twig___environment.html#a428d91319fc73d3038784cf5436936b6">00842</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a428d91319fc73d3038784cf5436936b6">getFilters</a>()
<a name="l00843"></a>00843     {
<a name="l00844"></a>00844         <span class="keywordflow">if</span> (null === $this-&gt;filters) {
<a name="l00845"></a>00845             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l00846"></a>00846                 <span class="keywordflow">foreach</span> ($extension-&gt;getFilters() as $name =&gt; $filter) {
<a name="l00847"></a>00847                     $this-&gt;<a class="code" href="class_twig___environment.html#a2b1ca0849f059aaa366ba9ba049dcdd7">addFilter</a>($name, $filter);
<a name="l00848"></a>00848                 }
<a name="l00849"></a>00849             }
<a name="l00850"></a>00850 
<a name="l00851"></a>00851             $this-&gt;filters = $this-&gt;staging[<span class="stringliteral">&#39;filters&#39;</span>];
<a name="l00852"></a>00852         }
<a name="l00853"></a>00853 
<a name="l00854"></a>00854         <span class="keywordflow">return</span> $this-&gt;filters;
<a name="l00855"></a>00855     }
<a name="l00856"></a>00856 
<a name="l00863"></a><a class="code" href="class_twig___environment.html#ab7d3be4d099ec13018a7e6f42db724d2">00863</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ab7d3be4d099ec13018a7e6f42db724d2">addTest</a>($name, <a class="code" href="interface_twig___test_interface.html">Twig_TestInterface</a> $test)
<a name="l00864"></a>00864     {
<a name="l00865"></a>00865         $this-&gt;staging[<span class="stringliteral">&#39;tests&#39;</span>][$name] = $test;
<a name="l00866"></a>00866         $this-&gt;tests = null;
<a name="l00867"></a>00867     }
<a name="l00868"></a>00868 
<a name="l00874"></a><a class="code" href="class_twig___environment.html#a7e247dd31cc8d37a6c97353a062a0080">00874</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a7e247dd31cc8d37a6c97353a062a0080">getTests</a>()
<a name="l00875"></a>00875     {
<a name="l00876"></a>00876         <span class="keywordflow">if</span> (null === $this-&gt;tests) {
<a name="l00877"></a>00877             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l00878"></a>00878                 <span class="keywordflow">foreach</span> ($extension-&gt;getTests() as $name =&gt; $test) {
<a name="l00879"></a>00879                     $this-&gt;<a class="code" href="class_twig___environment.html#ab7d3be4d099ec13018a7e6f42db724d2">addTest</a>($name, $test);
<a name="l00880"></a>00880                 }
<a name="l00881"></a>00881             }
<a name="l00882"></a>00882 
<a name="l00883"></a>00883             $this-&gt;tests = $this-&gt;staging[<span class="stringliteral">&#39;tests&#39;</span>];
<a name="l00884"></a>00884         }
<a name="l00885"></a>00885 
<a name="l00886"></a>00886         <span class="keywordflow">return</span> $this-&gt;tests;
<a name="l00887"></a>00887     }
<a name="l00888"></a>00888 
<a name="l00895"></a><a class="code" href="class_twig___environment.html#a5fe978017ee1d10a64c6898180128d9a">00895</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a5fe978017ee1d10a64c6898180128d9a">addFunction</a>($name, <a class="code" href="interface_twig___function_interface.html">Twig_FunctionInterface</a> $function)
<a name="l00896"></a>00896     {
<a name="l00897"></a>00897         $this-&gt;staging[<span class="stringliteral">&#39;functions&#39;</span>][$name] = $function;
<a name="l00898"></a>00898         $this-&gt;functions = null;
<a name="l00899"></a>00899     }
<a name="l00900"></a>00900 
<a name="l00911"></a><a class="code" href="class_twig___environment.html#ae4433c0b7cff67452143bc6abd237330">00911</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ae4433c0b7cff67452143bc6abd237330">getFunction</a>($name)
<a name="l00912"></a>00912     {
<a name="l00913"></a>00913         <span class="keywordflow">if</span> (null === $this-&gt;functions) {
<a name="l00914"></a>00914             $this-&gt;<a class="code" href="class_twig___environment.html#a131c2522f07821f77cd1d038c216031b">getFunctions</a>();
<a name="l00915"></a>00915         }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917         <span class="keywordflow">if</span> (isset($this-&gt;functions[$name])) {
<a name="l00918"></a>00918             <span class="keywordflow">return</span> $this-&gt;functions[$name];
<a name="l00919"></a>00919         }
<a name="l00920"></a>00920 
<a name="l00921"></a>00921         <span class="keywordflow">foreach</span> ($this-&gt;functions as $pattern =&gt; $function) {
<a name="l00922"></a>00922             $pattern = str_replace(<span class="stringliteral">&#39;\\*&#39;</span>, <span class="stringliteral">&#39;(.*?)&#39;</span>, preg_quote($pattern, <span class="charliteral">&#39;#&#39;</span>), $count);
<a name="l00923"></a>00923 
<a name="l00924"></a>00924             <span class="keywordflow">if</span> ($count) {
<a name="l00925"></a>00925                 <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">&#39;#^&#39;</span>.$pattern.<span class="stringliteral">&#39;$#&#39;</span>, $name, $matches)) {
<a name="l00926"></a>00926                     array_shift($matches);
<a name="l00927"></a>00927                     $function-&gt;setArguments($matches);
<a name="l00928"></a>00928 
<a name="l00929"></a>00929                     <span class="keywordflow">return</span> $function;
<a name="l00930"></a>00930                 }
<a name="l00931"></a>00931             }
<a name="l00932"></a>00932         }
<a name="l00933"></a>00933 
<a name="l00934"></a>00934         <span class="keywordflow">foreach</span> ($this-&gt;functionCallbacks as $callback) {
<a name="l00935"></a>00935             <span class="keywordflow">if</span> (<span class="keyword">false</span> !== $function = call_user_func($callback, $name)) {
<a name="l00936"></a>00936                 <span class="keywordflow">return</span> $function;
<a name="l00937"></a>00937             }
<a name="l00938"></a>00938         }
<a name="l00939"></a>00939 
<a name="l00940"></a>00940         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00941"></a>00941     }
<a name="l00942"></a>00942 
<a name="l00943"></a><a class="code" href="class_twig___environment.html#a64b35a5fbb8691099c5fcdb36e763779">00943</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a64b35a5fbb8691099c5fcdb36e763779">registerUndefinedFunctionCallback</a>($callable)
<a name="l00944"></a>00944     {
<a name="l00945"></a>00945         $this-&gt;functionCallbacks[] = $callable;
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947 
<a name="l00957"></a><a class="code" href="class_twig___environment.html#a131c2522f07821f77cd1d038c216031b">00957</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a131c2522f07821f77cd1d038c216031b">getFunctions</a>()
<a name="l00958"></a>00958     {
<a name="l00959"></a>00959         <span class="keywordflow">if</span> (null === $this-&gt;functions) {
<a name="l00960"></a>00960             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l00961"></a>00961                 <span class="keywordflow">foreach</span> ($extension-&gt;getFunctions() as $name =&gt; $function) {
<a name="l00962"></a>00962                     $this-&gt;<a class="code" href="class_twig___environment.html#a5fe978017ee1d10a64c6898180128d9a">addFunction</a>($name, $function);
<a name="l00963"></a>00963                 }
<a name="l00964"></a>00964             }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966             $this-&gt;functions = $this-&gt;staging[<span class="stringliteral">&#39;functions&#39;</span>];
<a name="l00967"></a>00967         }
<a name="l00968"></a>00968 
<a name="l00969"></a>00969         <span class="keywordflow">return</span> $this-&gt;functions;
<a name="l00970"></a>00970     }
<a name="l00971"></a>00971 
<a name="l00978"></a><a class="code" href="class_twig___environment.html#ad967754d97f0c9ccd329246fa9255808">00978</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ad967754d97f0c9ccd329246fa9255808">addGlobal</a>($name, $value)
<a name="l00979"></a>00979     {
<a name="l00980"></a>00980         $this-&gt;staging[<span class="stringliteral">&#39;globals&#39;</span>][$name] = $value;
<a name="l00981"></a>00981         $this-&gt;globals = null;
<a name="l00982"></a>00982     }
<a name="l00983"></a>00983 
<a name="l00989"></a><a class="code" href="class_twig___environment.html#ae3a26252ce6efe503698085a7ed69dad">00989</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ae3a26252ce6efe503698085a7ed69dad">getGlobals</a>()
<a name="l00990"></a>00990     {
<a name="l00991"></a>00991         <span class="keywordflow">if</span> (null === $this-&gt;globals) {
<a name="l00992"></a>00992             $this-&gt;globals = isset($this-&gt;staging[<span class="stringliteral">&#39;globals&#39;</span>]) ? $this-&gt;staging[<span class="stringliteral">&#39;globals&#39;</span>] : array();
<a name="l00993"></a>00993             <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l00994"></a>00994                 $this-&gt;globals = array_merge($this-&gt;globals, $extension-&gt;getGlobals());
<a name="l00995"></a>00995             }
<a name="l00996"></a>00996         }
<a name="l00997"></a>00997 
<a name="l00998"></a>00998         <span class="keywordflow">return</span> $this-&gt;globals;
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000 
<a name="l01008"></a><a class="code" href="class_twig___environment.html#a7e84fd2f4a105b68c7167060ae59b87d">01008</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a7e84fd2f4a105b68c7167060ae59b87d">mergeGlobals</a>(array $context)
<a name="l01009"></a>01009     {
<a name="l01010"></a>01010         <span class="comment">// we don&#39;t use array_merge as the context being generally</span>
<a name="l01011"></a>01011         <span class="comment">// bigger than globals, this code is faster.</span>
<a name="l01012"></a>01012         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#ae3a26252ce6efe503698085a7ed69dad">getGlobals</a>() as $key =&gt; $value) {
<a name="l01013"></a>01013             <span class="keywordflow">if</span> (!array_key_exists($key, $context)) {
<a name="l01014"></a>01014                 $context[$key] = $value;
<a name="l01015"></a>01015             }
<a name="l01016"></a>01016         }
<a name="l01017"></a>01017 
<a name="l01018"></a>01018         <span class="keywordflow">return</span> $context;
<a name="l01019"></a>01019     }
<a name="l01020"></a>01020 
<a name="l01026"></a><a class="code" href="class_twig___environment.html#a03f904feb2595160e2329a31e3246b3a">01026</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#a03f904feb2595160e2329a31e3246b3a">getUnaryOperators</a>()
<a name="l01027"></a>01027     {
<a name="l01028"></a>01028         <span class="keywordflow">if</span> (null === $this-&gt;unaryOperators) {
<a name="l01029"></a>01029             $this-&gt;<a class="code" href="class_twig___environment.html#ac1ecf0a23104d22427c6d22f165b07fc">initOperators</a>();
<a name="l01030"></a>01030         }
<a name="l01031"></a>01031 
<a name="l01032"></a>01032         <span class="keywordflow">return</span> $this-&gt;unaryOperators;
<a name="l01033"></a>01033     }
<a name="l01034"></a>01034 
<a name="l01040"></a><a class="code" href="class_twig___environment.html#ac1c8ecccd7414ea56428a303bc47f66b">01040</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ac1c8ecccd7414ea56428a303bc47f66b">getBinaryOperators</a>()
<a name="l01041"></a>01041     {
<a name="l01042"></a>01042         <span class="keywordflow">if</span> (null === $this-&gt;binaryOperators) {
<a name="l01043"></a>01043             $this-&gt;<a class="code" href="class_twig___environment.html#ac1ecf0a23104d22427c6d22f165b07fc">initOperators</a>();
<a name="l01044"></a>01044         }
<a name="l01045"></a>01045 
<a name="l01046"></a>01046         <span class="keywordflow">return</span> $this-&gt;binaryOperators;
<a name="l01047"></a>01047     }
<a name="l01048"></a>01048 
<a name="l01049"></a><a class="code" href="class_twig___environment.html#ac9eaf340606e898687d353a69f1a0b61">01049</a>     <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ac9eaf340606e898687d353a69f1a0b61">computeAlternatives</a>($name, $items)
<a name="l01050"></a>01050     {
<a name="l01051"></a>01051         $alternatives = array();
<a name="l01052"></a>01052         <span class="keywordflow">foreach</span> ($items as $item) {
<a name="l01053"></a>01053             $lev = levenshtein($name, $item);
<a name="l01054"></a>01054             <span class="keywordflow">if</span> ($lev &lt;= strlen($name) / 3 || <span class="keyword">false</span> !== strpos($item, $name)) {
<a name="l01055"></a>01055                 $alternatives[$item] = $lev;
<a name="l01056"></a>01056             }
<a name="l01057"></a>01057         }
<a name="l01058"></a>01058         asort($alternatives);
<a name="l01059"></a>01059 
<a name="l01060"></a>01060         <span class="keywordflow">return</span> array_keys($alternatives);
<a name="l01061"></a>01061     }
<a name="l01062"></a>01062 
<a name="l01063"></a><a class="code" href="class_twig___environment.html#ac1ecf0a23104d22427c6d22f165b07fc">01063</a>     <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#ac1ecf0a23104d22427c6d22f165b07fc">initOperators</a>()
<a name="l01064"></a>01064     {
<a name="l01065"></a>01065         $this-&gt;unaryOperators = array();
<a name="l01066"></a>01066         $this-&gt;binaryOperators = array();
<a name="l01067"></a>01067         <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_twig___environment.html#a0bf1cdb692f876fae6acd2bfbb548244">getExtensions</a>() as $extension) {
<a name="l01068"></a>01068             $operators = $extension-&gt;getOperators();
<a name="l01069"></a>01069 
<a name="l01070"></a>01070             <span class="keywordflow">if</span> (!$operators) {
<a name="l01071"></a>01071                 <span class="keywordflow">continue</span>;
<a name="l01072"></a>01072             }
<a name="l01073"></a>01073 
<a name="l01074"></a>01074             <span class="keywordflow">if</span> (2 !== count($operators)) {
<a name="l01075"></a>01075                 <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(sprintf(<span class="stringliteral">&#39;&quot;%s::getOperators()&quot; does not return a valid operators array.&#39;</span>, get_class($extension)));
<a name="l01076"></a>01076             }
<a name="l01077"></a>01077 
<a name="l01078"></a>01078             $this-&gt;unaryOperators = array_merge($this-&gt;unaryOperators, $operators[0]);
<a name="l01079"></a>01079             $this-&gt;binaryOperators = array_merge($this-&gt;binaryOperators, $operators[1]);
<a name="l01080"></a>01080         }
<a name="l01081"></a>01081     }
<a name="l01082"></a>01082 
<a name="l01083"></a><a class="code" href="class_twig___environment.html#afef0e86e8f08fa1d0c4006ce65bede10">01083</a>     <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_twig___environment.html#afef0e86e8f08fa1d0c4006ce65bede10">writeCacheFile</a>($file, $content)
<a name="l01084"></a>01084     {
<a name="l01085"></a>01085         $dir = dirname($file);
<a name="l01086"></a>01086         <span class="keywordflow">if</span> (!is_dir($dir)) {
<a name="l01087"></a>01087             <span class="keywordflow">if</span> (<span class="keyword">false</span> === @mkdir($dir, 0777, <span class="keyword">true</span>) &amp;&amp; !is_dir($dir)) {
<a name="l01088"></a>01088                 <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(sprintf(<span class="stringliteral">&quot;Unable to create the cache directory (%s).&quot;</span>, $dir));
<a name="l01089"></a>01089             }
<a name="l01090"></a>01090         } elseif (!is_writable($dir)) {
<a name="l01091"></a>01091             <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(sprintf(<span class="stringliteral">&quot;Unable to write in the cache directory (%s).&quot;</span>, $dir));
<a name="l01092"></a>01092         }
<a name="l01093"></a>01093 
<a name="l01094"></a>01094         $tmpFile = tempnam(dirname($file), basename($file));
<a name="l01095"></a>01095         <span class="keywordflow">if</span> (<span class="keyword">false</span> !== @file_put_contents($tmpFile, $content)) {
<a name="l01096"></a>01096             <span class="comment">// rename does not work on Win32 before 5.2.6</span>
<a name="l01097"></a>01097             <span class="keywordflow">if</span> (@rename($tmpFile, $file) || (@copy($tmpFile, $file) &amp;&amp; unlink($tmpFile))) {
<a name="l01098"></a>01098                 @chmod($file, 0644);
<a name="l01099"></a>01099 
<a name="l01100"></a>01100                 <span class="keywordflow">return</span>;
<a name="l01101"></a>01101             }
<a name="l01102"></a>01102         }
<a name="l01103"></a>01103 
<a name="l01104"></a>01104         <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_twig___error___runtime.html">Twig_Error_Runtime</a>(sprintf(<span class="stringliteral">&#39;Failed to write cache file &quot;%s&quot;.&#39;</span>, $file));
<a name="l01105"></a>01105     }
<a name="l01106"></a>01106 }
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tout</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Structures de données</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Espaces de nommage</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Fichiers</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Fonctions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Énumérations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_environment_8php.html">Environment.php</a>      </li>

    <li class="footer">Généré le Jeudi Mai 17 2012 16:28:58 pour Nina par
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
